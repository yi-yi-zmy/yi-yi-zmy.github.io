(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6c4c81d4"],{"6e2b":function(e,t,o){},7961:function(e,t,o){"use strict";var s=o("6e2b"),n=o.n(s);n.a},b953:function(e,t,o){"use strict";o.r(t);var s=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[e._m(0),o("div",{staticClass:"register_from"},[o("van-form",[o("van-field",{class:1==e.gaoShow?"van-field":"van-field-active",attrs:{name:"用户名",placeholder:"请输入手机号"},on:{click:function(t){return e.gao(1)}},scopedSlots:e._u([{key:"button",fn:function(){return[o("van-button",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],staticClass:"waw_button",attrs:{size:"small"},on:{click:e.getCode}},[e._v("发送验证码")]),o("span",{directives:[{name:"show",rawName:"v-show",value:!e.show,expression:"!show"}],staticClass:"count"},[e._v(e._s(e.count)+" s")])]},proxy:!0}]),model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),o("van-field",{class:2==e.gaoShow?"van-field":"van-field-active",attrs:{name:"短信验证码",placeholder:"请输入短信验证码"},on:{click:function(t){return e.gao(2)}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),o("div",{staticClass:"register_from_tiaozhuan"},[o("span",[e._v("*未注册的手机号将自动注册")]),o("span",{on:{click:e.toLogins}},[e._v("使用密码登录")])]),o("div",{staticStyle:{margin:"0.8rem","margin-top":"1rem"}},[o("van-button",{attrs:{round:"",block:"",type:"warning"},on:{click:e.onSubmit}},[e._v(" 提交 ")])],1)],1)],1)])},n=[function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"login_logo"},[o("img",{staticClass:"login_logo_img",attrs:{src:"https://msmk2019.oss-cn-shanghai.aliyuncs.com/uploads/image/2019pILfAg7Avr1567732916.png",alt:""}})])}],a=(o("a9e3"),o("2b0e")),i=o("d399");a["a"].use(i["a"]);var c={data:function(){return{username:"",password:"",show:!0,count:"",timer:null,gaoShow:0}},methods:{gao:function(e){this.gaoShow=e},onSubmit:function(){var e=this,t={mobile:Number(this.username),sms_code:Number(this.password),type:2,client:1};this.$ClientAPI.loginGetToken(t).then((function(t){console.log(t);var o=t.data.data.remember_token,s=t.data.data.mobile;localStorage.setItem("mobile",s),localStorage.setItem("token",o);var n=t.data.data.is_new;1==n?e.$router.push("/setPassword"):2==n&&(e.$router.push("/mine"),i["a"].success({message:"登录成功",position:"top"}))})).catch((function(e){console.log(e),i["a"].fail({message:"登录失败",position:"top"})}))},toLogins:function(){this.$router.push({path:"/login"})},getCode:function(){var e=this,t=/^[1]([3-9])[0-9]{9}$/;if(t.test(this.username)){var o=60;if(!this.timer){this.count=o,this.show=!1,this.timer=setInterval((function(){e.count>0&&e.count<=o?e.count--:(e.show=!0,clearInterval(e.timer),e.timer=null)}),1e3);var s={mobile:Number(this.username),sms_type:"login"};console.log(s.mobile),this.$ClientAPI.VerificationCode(s).then((function(t){console.log(t);var o=t.data.code;if(console.log(o),200!=o)return Object(i["a"])("".concat(t.data.msg)),void(e.show=!0);i["a"].success({message:"验证码已发送",position:"center"})})).catch((function(e){console.log(e)}))}}else Object(i["a"])({message:"手机号码格式不正确！！！",position:"center"})}}},r=c,l=(o("7961"),o("2877")),u=Object(l["a"])(r,s,n,!1,null,"676e78d1",null);t["default"]=u.exports}}]);
//# sourceMappingURL=chunk-6c4c81d4.40abb192.js.map